<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Paradex Professional Chart</title>
    <script src="https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js"></script>
    <style>
        body { font-family: sans-serif; background: #0b0e11; color: white; margin: 0; padding: 20px; }
        #chart-container { width: 100%; height: 400px; margin-top: 20px; border: 1px solid #2b2f36; }
    </style>
</head>
<body>
    <div id="chart-container"></div>
    <script>
        const chart = LightweightCharts.createChart(document.getElementById('chart-container'), {
            layout: { backgroundColor: '#0b0e11', textColor: '#d1d4dc' },
            timeScale: { timeVisible: true, secondsVisible: true }
        });
        const lineSeries = chart.addLineSeries({ color: '#00ffcc' });

        async function updateData() {
            try {
                const res = await fetch('http://localhost:8080/api/history');
                const data = await res.json();
                lineSeries.setData(data.map(d => ({ time: d.time, value: d.price })));
            } catch (e) { console.log("Waiting for Go server..."); }
        }
        setInterval(updateData, 2000);
    </script>
</body>
</html>
